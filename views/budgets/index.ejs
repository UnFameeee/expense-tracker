<div class="dashboard-summary">
    <div class="summary-card" style="background-color: #fff;">
        <div class="icon" style="background-color: #4361ee;">
            <i class="fas fa-piggy-bank"></i>
        </div>
        <div class="info">
            <h3><%= budgets.length %></h3>
            <p>Ngân sách đã tạo</p>
        </div>
    </div>
    <% if (budgets.length > 0) { %>
        <div class="summary-card" style="background-color: #fff;">
            <div class="icon" style="background-color: #38b000;">
                <i class="fas fa-money-bill-wave"></i>
            </div>
            <div class="info">
                <h3><%= new Intl.NumberFormat('vi-VN').format(budgets[0].base_salary) %> VND</h3>
                <p>Lương cơ bản</p>
            </div>
        </div>
        <div class="summary-card" style="background-color: #fff;">
            <div class="icon" style="background-color: #e63946;">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="info">
                <h3><%= new Intl.NumberFormat('vi-VN').format(budgets[0].savings_goal) %> VND</h3>
                <p>Mục tiêu tiết kiệm</p>
            </div>
        </div>
    <% } %>
</div>

<div class="card">
    <div class="card-header">
        <h2><i class="fas fa-piggy-bank"></i> Quản lý ngân sách</h2>
        <div>
            <a href="/budgets/new" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Tạo ngân sách</a>
            <a href="/budgets/forecast" class="btn" style="background-color: #4361ee; color: white;"><i class="fas fa-chart-line"></i> Dự báo</a>
        </div>
    </div>

    <% if (budgets.length > 0) { %>
        <table class="expense-table">
            <thead>
                <tr>
                    <th><i class="far fa-calendar-alt"></i> Tháng/Năm</th>
                    <th><i class="fas fa-money-bill-wave"></i> Lương cơ bản</th>
                    <th><i class="fas fa-piggy-bank"></i> Mục tiêu tiết kiệm</th>
                    <th><i class="fas fa-cogs"></i> Hành động</th>
                </tr>
            </thead>
            <tbody>
                <% budgets.forEach(budget => { %>
                    <tr>
                        <td>
                            <span class="category-badge">
                                <i class="fas fa-calendar-alt"></i>
                                <%= new Date(budget.year, budget.month - 1, 1).toLocaleDateString('vi-VN', { month: 'long', year: 'numeric' }) %>
                            </span>
                        </td>
                        <td class="amount"><%= budget.base_salary %></td>
                        <td class="amount"><%= budget.savings_goal %></td>
                        <td class="actions">
                            <a href="/budgets/<%= budget.id %>/edit" class="btn btn-edit"><i class="fas fa-edit"></i> Sửa</a>
                            <form action="/budgets/<%= budget.id %>?_method=DELETE" method="POST" class="delete-form">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('Bạn có chắc muốn xóa ngân sách này?')"><i class="fas fa-trash-alt"></i> Xóa</button>
                            </form>
                        </td>
                    </tr>
                <% }); %>
            </tbody>
        </table>
    <% } else { %>
        <div class="empty-message">
            <i class="fas fa-piggy-bank"></i>
            <p>Chưa có ngân sách nào được tạo.</p> 
            <a href="/budgets/new" class="btn btn-primary"><i class="fas fa-plus-circle"></i> Tạo ngân sách mới</a>
        </div>
    <% } %>
</div>
